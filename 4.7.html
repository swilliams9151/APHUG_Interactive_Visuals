<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APHG Topic 4.7: Forms of Governance</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        
        /* Flow Animation for Power Lines */
        @keyframes flowDash {
            to { stroke-dashoffset: -20; }
        }
        .power-line {
            stroke-dasharray: 5;
            animation: flowDash 1s linear infinite;
            opacity: 0.6;
        }
        
        /* Region Hover Effect */
        .region-path {
            transition: fill 0.3s ease, transform 0.3s ease;
            transform-origin: center;
        }
        .region-path:hover {
            filter: brightness(1.1);
        }

        /* Toggle Switch */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #10b981;
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #10b981;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Header -->
    <header class="bg-emerald-800 text-white p-6 shadow-lg">
        <div class="max-w-5xl mx-auto">
            <h1 class="text-3xl font-extrabold">Topic 4.7: Forms of Governance</h1>
            <p class="text-emerald-200 font-medium mt-1">Unitary vs. Federal States: Spatial Organization of Power</p>
        </div>
    </header>

    <main class="max-w-6xl mx-auto p-6 space-y-10">

        <!-- SECTION 1: The Simulator -->
        <div class="grid lg:grid-cols-3 gap-8">
            
            <!-- Left: Controls & Explanation -->
            <div class="bg-white rounded-xl shadow-lg p-6 border border-slate-200 lg:col-span-1 space-y-6">
                <div>
                    <h2 class="text-xl font-bold text-gray-800 mb-2">System Selector</h2>
                    <p class="text-sm text-gray-500 mb-4">Switch between governance styles to see how power is distributed.</p>
                    
                    <!-- Toggle Buttons -->
                    <div class="flex gap-2">
                        <button onclick="setSystem('unitary')" id="btn-unitary" class="flex-1 py-3 px-4 rounded-lg border-2 border-emerald-600 bg-emerald-50 text-emerald-800 font-bold transition shadow-sm">
                            Unitary
                        </button>
                        <button onclick="setSystem('federal')" id="btn-federal" class="flex-1 py-3 px-4 rounded-lg border-2 border-gray-200 bg-white text-gray-500 font-bold transition hover:bg-gray-50">
                            Federal
                        </button>
                    </div>
                </div>

                <div id="info-box" class="p-4 bg-emerald-50 rounded-lg border border-emerald-100 text-sm leading-relaxed">
                    <h3 class="font-bold text-emerald-800 mb-1">Unitary State</h3>
                    <p class="text-emerald-700">Power is concentrated in the <strong>Central Government</strong>. Local governments exist only to enforce national laws. Ideal for nation-states with homogenous populations.</p>
                </div>

                <!-- Action Button -->
                <div>
                    <h3 class="font-bold text-gray-800 mb-2">Test the System</h3>
                    <button onclick="passLaw()" class="w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition active:scale-95">
                        Pass New Law üìú
                    </button>
                    <p id="law-feedback" class="text-xs text-center text-gray-500 mt-2 h-4 transition-all"></p>
                </div>
            </div>

            <!-- Right: Interactive Visualizer -->
            <div class="bg-white rounded-xl shadow-lg p-6 border border-slate-200 lg:col-span-2 flex flex-col items-center justify-center relative bg-slate-100">
                
                <!-- The Country Map SVG -->
                <svg width="500" height="400" viewBox="0 0 500 400" class="max-w-full h-auto drop-shadow-xl">
                    
                    <!-- Definitions for Markers -->
                    <defs>
                        <marker id="arrow-unitary" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                            <path d="M0,0 L0,6 L9,3 z" fill="#059669" />
                        </marker>
                        <marker id="arrow-federal" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                            <path d="M0,0 L0,6 L9,3 z" fill="#2563eb" />
                        </marker>
                    </defs>

                    <!-- Regions (The "State") -->
                    <!-- Region 1: North (Mountainous/Minority?) -->
                    <path id="region-1" d="M 50 100 L 250 50 L 450 100 L 400 200 L 100 200 Z" 
                          fill="#e2e8f0" stroke="white" stroke-width="3" class="region-path"/>
                    
                    <!-- Region 2: Southwest (Urban Core?) -->
                    <path id="region-2" d="M 50 100 L 100 200 L 250 350 L 50 350 Z" 
                          fill="#e2e8f0" stroke="white" stroke-width="3" class="region-path"/>

                    <!-- Region 3: Southeast (Rural?) -->
                    <path id="region-3" d="M 450 100 L 450 350 L 250 350 L 100 200 L 400 200 Z" 
                          fill="#e2e8f0" stroke="white" stroke-width="3" class="region-path"/>

                    <!-- Capitals -->
                    
                    <!-- Central Capital (Always there) -->
                    <circle cx="250" cy="200" r="20" fill="#1e293b" stroke="white" stroke-width="3" />
                    <text x="250" y="205" text-anchor="middle" fill="white" font-size="14" font-weight="bold">üèõÔ∏è</text>
                    <text x="250" y="235" text-anchor="middle" fill="#1e293b" font-size="12" font-weight="bold">Central Gov</text>

                    <!-- Local Gov Icons (Hidden by default in Unitary) -->
                    <g id="local-govs" class="opacity-0 transition-opacity duration-500">
                        <circle cx="150" cy="120" r="12" fill="#3b82f6" stroke="white" stroke-width="2" />
                        <text x="150" y="124" text-anchor="middle" fill="white" font-size="8">Local</text>
                        
                        <circle cx="120" cy="300" r="12" fill="#3b82f6" stroke="white" stroke-width="2" />
                        <text x="120" y="304" text-anchor="middle" fill="white" font-size="8">Local</text>

                        <circle cx="380" cy="280" r="12" fill="#3b82f6" stroke="white" stroke-width="2" />
                        <text x="380" y="284" text-anchor="middle" fill="white" font-size="8">Local</text>
                    </g>

                    <!-- Power Lines (Animated via JS) -->
                    <g id="power-lines"></g>

                </svg>

                <!-- Legend Overlay -->
                <div class="absolute bottom-4 right-4 bg-white/90 backdrop-blur p-3 rounded-lg shadow-sm text-xs border border-gray-200">
                    <div class="flex items-center mb-1">
                        <span class="w-3 h-3 bg-slate-800 rounded-full mr-2"></span> National Capital
                    </div>
                    <div class="flex items-center">
                        <span class="w-3 h-3 bg-blue-500 rounded-full mr-2"></span> Local Government
                    </div>
                </div>

            </div>
        </div>

        <!-- SECTION 2: Comparative Analysis -->
        <div class="grid md:grid-cols-2 gap-6">
            
            <!-- Unitary Pros/Cons -->
            <div class="bg-white rounded-xl shadow p-6 border-t-4 border-emerald-500">
                <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                    <span class="text-2xl mr-2">üü¢</span> Unitary States
                </h3>
                <p class="text-sm text-gray-600 mb-4 italic">"Top-down control. Uniform laws."</p>
                
                <div class="space-y-3">
                    <div class="flex items-start">
                        <span class="text-emerald-600 font-bold mr-2">‚úì</span>
                        <p class="text-sm text-gray-700"><strong>Efficiency:</strong> Laws passed quickly; standardized policies nationwide.</p>
                    </div>
                    <div class="flex items-start">
                        <span class="text-emerald-600 font-bold mr-2">‚úì</span>
                        <p class="text-sm text-gray-700"><strong>Unity:</strong> Promotes nationalism and reduces internal border friction.</p>
                    </div>
                    <div class="flex items-start">
                        <span class="text-red-500 font-bold mr-2">‚úó</span>
                        <p class="text-sm text-gray-700"><strong>Disconnect:</strong> Central gov may ignore local minority needs (Centrifugal Force).</p>
                    </div>
                </div>
                
                <div class="mt-4 pt-4 border-t border-gray-100">
                    <span class="text-xs font-bold text-gray-400 uppercase">Real World Examples</span>
                    <div class="flex gap-2 mt-2">
                        <span class="px-2 py-1 bg-gray-100 rounded text-xs font-semibold text-gray-700">Japan</span>
                        <span class="px-2 py-1 bg-gray-100 rounded text-xs font-semibold text-gray-700">France</span>
                        <span class="px-2 py-1 bg-gray-100 rounded text-xs font-semibold text-gray-700">China</span>
                        <span class="px-2 py-1 bg-gray-100 rounded text-xs font-semibold text-gray-700">UK*</span>
                    </div>
                </div>
            </div>

            <!-- Federal Pros/Cons -->
            <div class="bg-white rounded-xl shadow p-6 border-t-4 border-blue-500">
                <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                    <span class="text-2xl mr-2">üîµ</span> Federal States
                </h3>
                <p class="text-sm text-gray-600 mb-4 italic">"Shared power. Local autonomy."</p>
                
                <div class="space-y-3">
                    <div class="flex items-start">
                        <span class="text-blue-600 font-bold mr-2">‚úì</span>
                        <p class="text-sm text-gray-700"><strong>Local Control:</strong> Regions can pass laws that fit their specific culture/needs.</p>
                    </div>
                    <div class="flex items-start">
                        <span class="text-blue-600 font-bold mr-2">‚úì</span>
                        <p class="text-sm text-gray-700"><strong>Conflict Resolution:</strong> Gives minorities a voice, reducing desire for separatism.</p>
                    </div>
                    <div class="flex items-start">
                        <span class="text-red-500 font-bold mr-2">‚úó</span>
                        <p class="text-sm text-gray-700"><strong>Inequality:</strong> Laws and services (like education) differ between regions.</p>
                    </div>
                </div>

                <div class="mt-4 pt-4 border-t border-gray-100">
                    <span class="text-xs font-bold text-gray-400 uppercase">Real World Examples</span>
                    <div class="flex gap-2 mt-2">
                        <span class="px-2 py-1 bg-gray-100 rounded text-xs font-semibold text-gray-700">USA</span>
                        <span class="px-2 py-1 bg-gray-100 rounded text-xs font-semibold text-gray-700">Canada</span>
                        <span class="px-2 py-1 bg-gray-100 rounded text-xs font-semibold text-gray-700">Russia</span>
                        <span class="px-2 py-1 bg-gray-100 rounded text-xs font-semibold text-gray-700">Nigeria</span>
                    </div>
                </div>
            </div>

        </div>

    </main>

    <script>
        let currentSystem = 'unitary';
        const regions = ['region-1', 'region-2', 'region-3'];
        const regionCenters = {
            'region-1': {x: 150, y: 120}, // North
            'region-2': {x: 120, y: 300}, // Southwest
            'region-3': {x: 380, y: 280}  // Southeast
        };
        const centralGov = {x: 250, y: 200};

        function setSystem(system) {
            currentSystem = system;
            
            // 1. Update Buttons
            const btnU = document.getElementById('btn-unitary');
            const btnF = document.getElementById('btn-federal');
            const infoBox = document.getElementById('info-box');
            const localGovs = document.getElementById('local-govs');

            if (system === 'unitary') {
                btnU.className = "flex-1 py-3 px-4 rounded-lg border-2 border-emerald-600 bg-emerald-50 text-emerald-800 font-bold transition shadow-sm";
                btnF.className = "flex-1 py-3 px-4 rounded-lg border-2 border-gray-200 bg-white text-gray-500 font-bold transition hover:bg-gray-50";
                
                infoBox.innerHTML = `
                    <h3 class="font-bold text-emerald-800 mb-1">Unitary State</h3>
                    <p class="text-emerald-700">Power flows <strong>Top-Down</strong>. Laws are uniform. Works best in smaller, culturally unified states.</p>
                `;
                
                localGovs.classList.add('opacity-0');
                drawPowerLines('unitary');
                resetRegionColors();
            } else {
                btnF.className = "flex-1 py-3 px-4 rounded-lg border-2 border-blue-600 bg-blue-50 text-blue-800 font-bold transition shadow-sm";
                btnU.className = "flex-1 py-3 px-4 rounded-lg border-2 border-gray-200 bg-white text-gray-500 font-bold transition hover:bg-gray-50";
                
                infoBox.innerHTML = `
                    <h3 class="font-bold text-blue-800 mb-1">Federal State</h3>
                    <p class="text-blue-700">Power is <strong>Shared</strong>. Central gov handles defense/foreign policy; Local govs handle education/police. Works best in large, diverse states.</p>
                `;
                
                localGovs.classList.remove('opacity-0');
                drawPowerLines('federal');
                resetRegionColors();
            }
            
            // Clear feedback text
            document.getElementById('law-feedback').innerText = "";
        }

        function drawPowerLines(type) {
            const container = document.getElementById('power-lines');
            container.innerHTML = ''; // Clear existing

            if (type === 'unitary') {
                // Draw arrows from Center to Regions
                Object.values(regionCenters).forEach(coords => {
                    const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    line.setAttribute("x1", centralGov.x);
                    line.setAttribute("y1", centralGov.y);
                    line.setAttribute("x2", coords.x);
                    line.setAttribute("y2", coords.y);
                    line.setAttribute("stroke", "#059669");
                    line.setAttribute("stroke-width", "3");
                    line.setAttribute("class", "power-line");
                    line.setAttribute("marker-end", "url(#arrow-unitary)");
                    container.appendChild(line);
                });
            } else {
                // Federal: Draw arrows mostly static or bidirectional simulation
                // Let's draw dashed lines connecting them to show "connection" rather than "command"
                Object.values(regionCenters).forEach(coords => {
                    const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    line.setAttribute("x1", centralGov.x);
                    line.setAttribute("y1", centralGov.y);
                    line.setAttribute("x2", coords.x);
                    line.setAttribute("y2", coords.y);
                    line.setAttribute("stroke", "#2563eb");
                    line.setAttribute("stroke-width", "2");
                    line.setAttribute("stroke-dasharray", "4"); // Dashed for shared power
                    container.appendChild(line);
                });
            }
        }

        function resetRegionColors() {
            regions.forEach(id => {
                document.getElementById(id).setAttribute('fill', '#e2e8f0');
            });
        }

        function passLaw() {
            const feedback = document.getElementById('law-feedback');
            
            if (currentSystem === 'unitary') {
                // Unitary: All regions turn same color
                regions.forEach(id => {
                    document.getElementById(id).setAttribute('fill', '#6ee7b7'); // Emerald-300
                });
                feedback.innerText = "Law passed centrally! Applied uniformly to all regions instantly.";
                feedback.className = "text-xs text-center text-emerald-600 mt-2 h-4 font-bold";
            } else {
                // Federal: Regions take random different actions (colors)
                const colors = ['#93c5fd', '#fca5a5', '#e2e8f0']; // Blue, Red, Grey
                
                regions.forEach((id, index) => {
                    // Simulate local decision making
                    const choice = Math.floor(Math.random() * 2); // 0 or 1
                    const color = choice === 0 ? '#93c5fd' : '#fca5a5'; // Accept or Modify
                    document.getElementById(id).setAttribute('fill', color);
                });

                feedback.innerText = "Central Law suggested... but local regions modified it to fit their needs.";
                feedback.className = "text-xs text-center text-blue-600 mt-2 h-4 font-bold";
            }
        }

        // Init
        setSystem('unitary');

    </script>
</body>
</html>
