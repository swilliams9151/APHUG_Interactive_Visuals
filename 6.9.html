<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APHG Topic 6.9: Urban Data</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        
        /* Transitions */
        .chart-bar { transition: height 0.8s cubic-bezier(0.34, 1.56, 0.64, 1), background-color 0.5s; }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Drag and Drop */
        .draggable { cursor: grab; touch-action: none; }
        .draggable:active { cursor: grabbing; }
        .drop-zone { transition: all 0.3s; }
        .drop-zone.highlight { background-color: #f0f9ff; border-color: #0ea5e9; }
        .drop-zone.correct { background-color: #dcfce7; border-color: #10b981; }
        .drop-zone.wrong { animation: shake 0.4s; background-color: #fee2e2; border-color: #ef4444; }

        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

        /* Tab Active */
        .nav-btn.active { border-bottom: 4px solid #6366f1; color: #4f46e5; background-color: white; }
        .nav-btn { border-bottom: 4px solid transparent; }
    </style>
</head>
<body class="bg-slate-900 text-slate-200 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-indigo-900 text-white p-6 shadow-lg shrink-0 z-10">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-extrabold">Topic 6.9: Urban Data</h1>
                <p class="text-indigo-200 text-sm mt-1">Quantitative vs. Qualitative Analysis (IMP-6.E)</p>
            </div>
            <div class="hidden md:block text-xs bg-indigo-800 px-3 py-1 rounded border border-indigo-700">
                Census ‚Ä¢ Surveys ‚Ä¢ Field Studies
            </div>
        </div>
    </header>

    <main class="flex-1 max-w-6xl mx-auto w-full p-6 space-y-8">

        <!-- Nav -->
        <div class="flex border-b border-slate-700 mb-6">
            <button onclick="setTab('types')" id="tab-types" class="nav-btn active w-1/3 py-3 font-bold text-slate-400 hover:bg-slate-800 transition">1. Data Types</button>
            <button onclick="setTab('quant')" id="tab-quant" class="nav-btn w-1/3 py-3 font-bold text-slate-400 hover:bg-slate-800 transition">2. Quantitative (Census)</button>
            <button onclick="setTab('qual')" id="tab-qual" class="nav-btn w-1/3 py-3 font-bold text-slate-400 hover:bg-slate-800 transition">3. Qualitative (Voices)</button>
        </div>

        <!-- SECTION 1: DATA SORTER -->
        <section id="view-types" class="bg-white rounded-2xl shadow-xl border border-slate-200 p-8 text-slate-800">
            <div class="text-center mb-8">
                <h2 class="text-2xl font-bold text-indigo-900">Quantitative or Qualitative?</h2>
                <p class="text-sm text-slate-500 mt-1">Drag the data source to the correct bin.</p>
            </div>

            <div class="grid md:grid-cols-2 gap-8 mb-8">
                <!-- Quant Bin -->
                <div class="drop-zone p-6 rounded-xl border-2 border-dashed border-blue-300 bg-blue-50 flex flex-col items-center min-h-[200px]" ondragover="allowDrop(event)" ondrop="drop(event, 'quant')">
                    <div class="text-4xl mb-2">üìä</div>
                    <h3 class="font-bold text-blue-800">Quantitative</h3>
                    <p class="text-xs text-blue-600 mb-4">Numbers, Statistics, Hard Data</p>
                    <div id="bin-quant" class="w-full space-y-2"></div>
                </div>

                <!-- Qual Bin -->
                <div class="drop-zone p-6 rounded-xl border-2 border-dashed border-purple-300 bg-purple-50 flex flex-col items-center min-h-[200px]" ondragover="allowDrop(event)" ondrop="drop(event, 'qual')">
                    <div class="text-4xl mb-2">üìù</div>
                    <h3 class="font-bold text-purple-800">Qualitative</h3>
                    <p class="text-xs text-purple-600 mb-4">Opinions, Observations, Narratives</p>
                    <div id="bin-qual" class="w-full space-y-2"></div>
                </div>
            </div>

            <!-- Source Bank -->
            <div id="source-bank" class="flex flex-wrap gap-3 justify-center bg-slate-100 p-4 rounded-xl border border-slate-200">
                <div id="item-1" class="draggable bg-white px-4 py-2 rounded shadow border border-slate-300 font-bold text-xs cursor-grab hover:scale-105 transition" draggable="true" ondragstart="drag(event)" data-type="quant">Census Tract Income</div>
                <div id="item-2" class="draggable bg-white px-4 py-2 rounded shadow border border-slate-300 font-bold text-xs cursor-grab hover:scale-105 transition" draggable="true" ondragstart="drag(event)" data-type="qual">Resident Interview</div>
                <div id="item-3" class="draggable bg-white px-4 py-2 rounded shadow border border-slate-300 font-bold text-xs cursor-grab hover:scale-105 transition" draggable="true" ondragstart="drag(event)" data-type="quant">Population Density Map</div>
                <div id="item-4" class="draggable bg-white px-4 py-2 rounded shadow border border-slate-300 font-bold text-xs cursor-grab hover:scale-105 transition" draggable="true" ondragstart="drag(event)" data-type="qual">Field Observation Notes</div>
                <div id="item-5" class="draggable bg-white px-4 py-2 rounded shadow border border-slate-300 font-bold text-xs cursor-grab hover:scale-105 transition" draggable="true" ondragstart="drag(event)" data-type="quant">Crime Rate Statistics</div>
                <div id="item-6" class="draggable bg-white px-4 py-2 rounded shadow border border-slate-300 font-bold text-xs cursor-grab hover:scale-105 transition" draggable="true" ondragstart="drag(event)" data-type="qual">Photo of Graffiti</div>
            </div>
        </section>

        <!-- SECTION 2: QUANTITATIVE (The Census) -->
        <section id="view-quant" class="hidden bg-white rounded-2xl shadow-xl border border-slate-200 p-8 text-slate-800">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-2xl font-bold text-indigo-900">Census Data: "The Heights"</h2>
                    <p class="text-sm text-slate-500 mt-1">Analyze how the neighborhood changed over 14 years.</p>
                </div>
                <div class="flex gap-2 bg-slate-100 p-1 rounded-lg">
                    <button onclick="setDataYear(2010)" id="btn-2010" class="px-4 py-2 text-xs font-bold rounded bg-indigo-600 text-white shadow transition">2010 Census</button>
                    <button onclick="setDataYear(2024)" id="btn-2024" class="px-4 py-2 text-xs font-bold rounded bg-white text-slate-600 hover:bg-slate-200 transition">2024 Census</button>
                </div>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                
                <!-- Chart 1: Rent -->
                <div class="bg-slate-50 p-6 rounded-xl border border-slate-200 text-center">
                    <h3 class="text-xs font-bold text-slate-400 uppercase mb-4">Median Rent</h3>
                    <div class="flex items-end justify-center h-40 gap-4 relative">
                        <div id="bar-rent" class="w-16 bg-emerald-500 rounded-t shadow-lg chart-bar flex items-end justify-center text-white font-bold text-xs pb-2" style="height: 40%">$800</div>
                    </div>
                </div>

                <!-- Chart 2: Demographics -->
                <div class="bg-slate-50 p-6 rounded-xl border border-slate-200 text-center">
                    <h3 class="text-xs font-bold text-slate-400 uppercase mb-4">Demographics</h3>
                    <div class="flex items-end justify-center h-40 gap-2 relative px-4">
                        <!-- Long-time Residents -->
                        <div class="w-12 bg-blue-500 rounded-t shadow chart-bar flex items-end justify-center text-white text-[10px] pb-1" id="bar-demo-1" style="height: 80%">80%</div>
                        <!-- Newcomers -->
                        <div class="w-12 bg-purple-500 rounded-t shadow chart-bar flex items-end justify-center text-white text-[10px] pb-1" id="bar-demo-2" style="height: 20%">20%</div>
                    </div>
                    <div class="flex justify-center gap-2 mt-2 text-[8px] font-bold uppercase text-slate-400">
                        <span class="text-blue-500">Original</span>
                        <span class="text-purple-500">New</span>
                    </div>
                </div>

                <!-- Analysis Box -->
                <div class="flex flex-col justify-center bg-indigo-50 p-6 rounded-xl border border-indigo-100">
                    <h4 class="font-bold text-indigo-900 mb-2">Quantitative Analysis</h4>
                    <p id="quant-analysis" class="text-sm text-indigo-800 leading-relaxed">
                        In 2010, rents were affordable ($800) and the population was mostly original working-class residents.
                    </p>
                    <div id="trend-badge" class="mt-4 inline-block bg-white text-indigo-600 text-xs font-bold px-3 py-1 rounded border border-indigo-200 self-start">
                        Status: Stable
                    </div>
                </div>

            </div>
        </section>

        <!-- SECTION 3: QUALITATIVE (The Narrative) -->
        <section id="view-qual" class="hidden bg-slate-800 rounded-2xl shadow-xl border border-slate-700 p-8 text-white">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-white">Field Study: Voices of "The Heights"</h2>
                <p class="text-sm text-slate-400 mt-1">Quantitative data tells you *what* happened. Qualitative data tells you *how it feels*.</p>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                
                <!-- Interview A -->
                <div class="bg-slate-700 p-6 rounded-xl border-l-4 border-blue-500 relative">
                    <div class="absolute -top-3 -left-3 bg-blue-500 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold shadow">A</div>
                    <p class="text-lg font-serif italic text-slate-200 mb-4">"I've lived here 30 years. The new coffee shop is nice, but my landlord raised the rent again. All my neighbors moved away. I feel like a stranger in my own home."</p>
                    <div class="flex justify-between items-end border-t border-slate-600 pt-3">
                        <div>
                            <div class="text-xs font-bold text-blue-400">Maria, 64</div>
                            <div class="text-[10px] text-slate-500">Long-time Resident</div>
                        </div>
                        <span class="text-xs bg-slate-800 px-2 py-1 rounded text-red-400">Sentiment: Displacement Anxiety</span>
                    </div>
                </div>

                <!-- Interview B -->
                <div class="bg-slate-700 p-6 rounded-xl border-l-4 border-purple-500 relative">
                    <div class="absolute -top-3 -left-3 bg-purple-500 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold shadow">B</div>
                    <p class="text-lg font-serif italic text-slate-200 mb-4">"We bought a fixer-upper last year. We love the historic character and how walkable it is. It's finally becoming a safe place to raise kids."</p>
                    <div class="flex justify-between items-end border-t border-slate-600 pt-3">
                        <div>
                            <div class="text-xs font-bold text-purple-400">Jason, 32</div>
                            <div class="text-[10px] text-slate-500">New Homeowner</div>
                        </div>
                        <span class="text-xs bg-slate-800 px-2 py-1 rounded text-emerald-400">Sentiment: Revitalization</span>
                    </div>
                </div>

            </div>

            <div class="mt-8 bg-slate-900 p-4 rounded-xl border border-slate-600 text-center">
                <h3 class="text-sm font-bold text-slate-300 uppercase mb-2">Synthesis (Skill 3.E)</h3>
                <p class="text-sm text-slate-400 max-w-2xl mx-auto">
                    Combining the data (Rent +200%) with the narratives (Displacement vs. Safety) reveals the process of <strong>Gentrification</strong>. Numbers show the cost; narratives show the cultural conflict.
                </p>
            </div>

        </section>

    </main>

    <script>
        // --- TAB LOGIC ---
        function setTab(id) {
            ['types', 'quant', 'qual'].forEach(t => {
                document.getElementById(`view-${t}`).classList.add('hidden');
                document.getElementById(`tab-${t}`).classList.remove('active');
            });
            document.getElementById(`view-${id}`).classList.remove('hidden');
            document.getElementById(`tab-${id}`).classList.add('active');
        }

        // --- 1. DRAG & DROP LOGIC ---
        function allowDrop(ev) { ev.preventDefault(); }
        
        function drag(ev) {
            ev.dataTransfer.setData("id", ev.target.id);
            ev.dataTransfer.setData("type", ev.target.dataset.type);
        }

        function drop(ev, zoneType) {
            ev.preventDefault();
            const id = ev.dataTransfer.getData("id");
            const type = ev.dataTransfer.getData("type");
            const item = document.getElementById(id);
            const zone = ev.currentTarget;

            if (type === zoneType) {
                const container = document.getElementById(`bin-${zoneType}`);
                // Styling item for bin
                item.className = "bg-white px-3 py-2 rounded shadow text-xs font-bold border border-slate-200 block w-full text-center fade-in";
                container.appendChild(item);
                zone.classList.add('correct');
                setTimeout(() => zone.classList.remove('correct'), 300);
            } else {
                zone.classList.add('wrong');
                setTimeout(() => zone.classList.remove('wrong'), 500);
            }
        }

        // --- 2. QUANT SIM LOGIC ---
        function setDataYear(year) {
            // Buttons
            document.getElementById('btn-2010').className = year === 2010 ? "px-4 py-2 text-xs font-bold rounded bg-indigo-600 text-white shadow transition" : "px-4 py-2 text-xs font-bold rounded bg-white text-slate-600 hover:bg-slate-200 transition";
            document.getElementById('btn-2024').className = year === 2024 ? "px-4 py-2 text-xs font-bold rounded bg-indigo-600 text-white shadow transition" : "px-4 py-2 text-xs font-bold rounded bg-white text-slate-600 hover:bg-slate-200 transition";

            const rentBar = document.getElementById('bar-rent');
            const demo1 = document.getElementById('bar-demo-1'); // Original
            const demo2 = document.getElementById('bar-demo-2'); // New
            const analysis = document.getElementById('quant-analysis');
            const badge = document.getElementById('trend-badge');

            if (year === 2010) {
                // Low Rent, High Original Pop
                rentBar.style.height = "40%";
                rentBar.innerText = "$800";
                rentBar.classList.replace('bg-red-500', 'bg-emerald-500');
                
                demo1.style.height = "80%"; demo1.innerText = "80%";
                demo2.style.height = "20%"; demo2.innerText = "20%";
                
                analysis.innerHTML = "In 2010, rents were affordable ($800) and the population was mostly original working-class residents.";
                badge.innerText = "Status: Stable / Low Income";
                badge.className = "mt-4 inline-block bg-white text-indigo-600 text-xs font-bold px-3 py-1 rounded border border-indigo-200 self-start";
            } else {
                // High Rent, Low Original Pop
                rentBar.style.height = "95%";
                rentBar.innerText = "$2,400";
                rentBar.classList.replace('bg-emerald-500', 'bg-red-500');

                demo1.style.height = "30%"; demo1.innerText = "30%";
                demo2.style.height = "70%"; demo2.innerText = "70%";

                analysis.innerHTML = "By 2024, rents tripled. The original population has plummeted (Displacement) as wealthier newcomers moved in.";
                badge.innerText = "Status: Gentrified";
                badge.className = "mt-4 inline-block bg-red-100 text-red-700 text-xs font-bold px-3 py-1 rounded border border-red-200 self-start animate-pulse";
            }
        }

    </script>
</body>
</html>
